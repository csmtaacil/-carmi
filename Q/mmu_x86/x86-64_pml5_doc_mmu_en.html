---
layout: risc_en
---
<script src="./x86-64_pml5_doc_mmu.js" type="module">
</script>	
<h2>(x86-64 pml5) mmu doc</h2>
	


<h3 style="padding-top: 0.5Em;">cr3</h3>
Register CR3 points to the active level 0 table.<br/>
If cr4.pcide is clear then the format is:
<canvas id= "cr3old" width="1000" height="70" style=" padding-bottom: 0.5Em;">
</canvas>
If cr4.pcide is set then the format is:
<canvas id= "cr3new" width="1000" height="30" style="padding-top: 0.5Em; padding-bottom: 0.5Em;">
</canvas>

Loading of CR3 purges the TLB unless
	we have ASIDs in the TLB.



<h3 style="padding-top: 0.5Em;">Level 0 (PML5E)</h3>
An entry in the external table (level 0) has the following format:
<canvas id="pml5e" width="1000" height="130" style="padding-top: 0.5Em;">
</canvas>
For our purpose only the rightmost three bits 
	are	of importance.
In fact only the P bit is relevant
since the page size we use is always 4KB and both the U and R
bit are always one.
<br/>

<h3 style="padding-top: 0.5Em;">Level 1 (PML4)</h3>
An entry in the level1 table has the following format:
<canvas id="pml4e" width="1000" height="130" style="padding-top: 0.5Em;">
</canvas>
For our purpose only the rightmost three bits 
	are	of importance.
In fact only the P bit is relevant
since the page size we use is always 4KB and both the U and R
bit are always one.
<br/>

<h3 style="padding-top: 0.5Em;">Middle Page Table Entry</h3>
An entry in the middle table has the following format:
<canvas id="pde" width="1000" height="130" style="padding-top: 0.5Em;">
</canvas>
For our purpose only the rightmost three bits 
	are	of importance.
In fact only the P bit is relevant
since the page size we use is always 4KB and both the U and R
bit are always one.
<br/>


<h3 style="padding-top: 0.5Em;">Internal Page Table Entry</h3>
The internal table entries are almost identical
	to the external table entries.
For our purpose the entries are identical.
<canvas id="pte" width="1000" height="130" style="padding-top: 0.5Em;">
</canvas>
The same comment noted for the external page table entries
is also relevant here, i.e.,
 only the rightmost three bits 
	are	of importance.
In fact only the P bit is relevant
since e page size we use is always 4KB and both the U and R
bit are always one.


<h3 style="padding-top: 0.5Em;">Virtual Address</h3>
The virtual address is considered to have three	
	fields as follows.
<canvas id="va" width="1000" height="60" style="padding-top: 0.5Em;">
</canvas>


<h3 style="padding-top: 0.5Em;">References	</h3>
The definite information on paging on Intel's processsor
	can be find in reference 1 chapter 4.
Reference 2 has good information in condensed form.
<ol>
<li>
<a href="https://www.intel.com/content/www/us/en/architecture-and-technology/64-ia-32-architectures-software-developer-vol-3a-part-1-manual.html">Intel® 64 and IA-32 Architectures
Software Developer’s Manual
Volume 3A:
System Programming Guide, Part 1.</a>
</li>
<li>
 <a href="https://wiki.osdev.org/Paging">osdev paging.</a>
</li>
</ol>
	





